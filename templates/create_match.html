{% extends 'base.html' %}
{% block content %}
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h2 class="mb-4">マッチング希望登録</h2>
      <form method="post">
        {{ form.hidden_tag() }}
        <div id="ranges-container">
          <div class="time-range mb-3">
            <label class="form-label">開始日時</label>
            <input type="datetime-local" class="form-control" name="range_start" required>
            <label class="form-label mt-2">終了日時</label>
            <input type="datetime-local" class="form-control" name="range_end" required>
          </div>
        </div>
        <button type="button" class="btn btn-secondary btn-sm mb-3" id="add-range">範囲を追加</button>
        <div class="mb-3">
          {{ form.category.label(class="form-label") }}
          {{ form.category(class="form-select") }}
        </div>
        <div class="mb-3">
          {{ form.num_people.label(class="form-label") }}
          {{ form.num_people(class="form-control") }}
        </div>
        <div class="mb-3">
          {{ form.who.label(class="form-label") }}
          {{ form.who(class="form-select", multiple=True) }}
        </div>
        <div class="mb-3">
          {{ form.activity_hours.label(class="form-label") }}
          {{ form.activity_hours(class="form-control") }}
        </div>
        {{ form.submit(class="btn btn-primary") }}
      </form>
    </div>
  </div>
  <script>
    document.getElementById('add-range').addEventListener('click', function() {
      var container = document.getElementById('ranges-container');
      var block = container.querySelector('.time-range');
      var clone = block.cloneNode(true);
      clone.querySelector('input[name="range_start"]').value = '';
      clone.querySelector('input[name="range_end"]').value = '';
      container.appendChild(clone);
    });
  </script>
{% endblock %}
